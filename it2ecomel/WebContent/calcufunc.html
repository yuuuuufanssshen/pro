<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
    <title>Eco-Melbourne</title>
    <link rel="icon" href="img/logo.ico" />
	
    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/calculator.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>

    <!-- Plugin CSS -->
    <link href="vendor/magnific-popup/magnific-popup.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/creative.min.css" rel="stylesheet">
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
        <link href="css/index.css" rel="stylesheet">

	</head>

	<body>

<div id="cover">
  <body id="page-top">

 <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="#page-top">Eco Melbourne</a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="index.html">Home</a>
            </li>
            <li class="nav-item">
                <a class="nav-link js-scroll-trigger" href="calcufunc.html">Footprint Calculator</a>

            </li>
            
            <li class="nav-item">
              
              <a class="nav-link js-scroll-trigger" href="bickfunc.html">Eco-Journey Planner</a>
            </li>
            <li class="nav-item">
                <a class="nav-link js-scroll-trigger" href="data.html">Statistics</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="about.html">About Us</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>


    <header class="masthead text-center text-white d-flex" id="sm-layer">
        <div class="layer"> 
            <div class="container my-auto" >
              <div class="row" style="padding-bottom: 0;">
                <div class="col-lg-14 mx-auto">
            
                  <h1 class="text">Carbon Footprint Calculator</h1>
                  <hr>
                  <h4>Measure the amount of carbon dioxide you are producing when you travel and determine how best to reduce your impact.
                  </h4>
                </div>
              </div>
            </div>
          </div>
    </header>
    <div id="map" class="map" style="display: none;"></div>
<div class="content-holder">

    
        <div class="content" id="content-1" data-id='1'style="display: block;">
        <div class="container my-auto">
        <div class="row">
            <div class="col-sm-4">
                <div class="item" data-aos="fade-right">
                    <div class="imgcontainer">
                        <img src="img/cal.png">
                        </div>
              </div>
            </div>
            <div class="col-sm-8" style="
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);"> 
          <div class="col-lg-10 mx-auto">
            <h2 style="text-align: center;margin-top: 5%;font-size: 40px;">
              Where are you going today?
              <hr>
            </h2>
            <br>
          </div>
          
          <div class="col-lg-8 mx-auto" style="text-align: center;">
             
	 <input  id="origin-input" class="controls" type="text"
        placeholder="Enter your origin location">
	</br>
		</br>
		</br>


<input id="destination-input" class="controls" type="text"
        placeholder="Enter your destination location">
</br>
</br>
<div class="calculate">
<button type="button" class="next">Calculate</button></div>
  <div class="container my-auto" style="display: none;">
      
      <div class="row">
            <div class="col-sm-6"> </div>
            <div class="col-sm-6"> 
          <div class="col-lg-10 mx-auto">
            <h1 style="text-align: center;margin-top: 5%;font-size: 40px;">
              <strong>Calculate your travel mode</strong>
            </h1>
            <br>
          </div>
          <div class="col-lg-8 mx-auto">
      <div id="mode-selector" class="controls2">
      	<div class="container"><div class="row"><div class="col"><input type="radio" name="type" id="changemode-walking">
      <label for="changemode-walking"><img src="img/1.png"></label></div><div class="col"><input type="radio" name="type" id="changemode-transit">
      <label for="changemode-transit"><img src="img/4.png"></label></div></div>
      <div class="row"><div class="col"><input type="radio" name="type" id="changemode-driving">
      <label for="changemode-driving"><img src="img/3.png"></label></div><div class="col"><input type="radio" name="type" id="changemode-bike">
      <label for="changemode-bike"><img src="img/2.png"></label></div></div>
      </div>
      
    </div>
          </div>
          </div>
        </div> 
      </div>
          </div>
        </div>
        </div>
      </div>
    </div>

   
      <div class="content" id="content-2" data-id='2'>
      <div class="container">
  <div class="row">
    <div class="col">
    	   
 <h2 style="font-family: Roboto;text-align: center;">CO<sub>2</sub> emissions for your travel</h2>
    <hr  />
    <div class="row" style="padding-top: 20px;">
    <div class="col-sm-4" id="card"> <button type="button" class="edit-previous">Calculate again</button></div>
    
 <div class="col-sm-8">
   
    <div 	id="graphic" style="width: 100%;"></div>
  
  </div>
  </div>
</div>
</div>
 
<h2 style="font-family: Roboto;text-align: center;">Impact of CO<sub>2</sub> emissions from your travel</h2>
	<hr  />
    <div class="row" style="padding-top: 20px;">
    <div class="col">	
        <div class="item" data-aos="fade-right">
<div class="resultbox"  id="resutlwithemission">
  <img src="img/tree.jpg">
</div>
 	</div>
 	</div>
 	<div class="col" id="impact">
 	<h4>You have travelled <label id="distence"></label> km</h4>
 	<h4>Travel by car:</h4>
 	<p>it will take ONE TREE <label id="result3"style="color: #B21F2D;"></label> to absorb these CO<sub>2</sub> produced.</p>
 	<h4>Travel by bus:</h4>
 	<p>it will take ONE TREE <label id="result4"style="color: #B21F2D;"></label> to absorb these CO<sub>2</sub> produced.</p>
   <button type="button" class="edit-previous">Calculate again</button> 
</div>

 </div>
 <h2 style="font-family: Roboto;text-align: center;">Eco-Journey Planner</h2>
	<hr  />
    <div class="row" style="padding-top: 20px;">
    
 	<div class="col" id="impact">
   <h3>Travel the eco-friendly way. <br> </h3>
   <p>Find bike sharing stations, drinking water fountain, public toilet and bike parking spots on the route to your destination.</p>
   <a class="gobike" href="bickfunc.html">Plan my journey</a>  
  </div>
 <div class="col">	
    <div class="imgcontainer" id="stage">
        <img src="img/tablet.png" id="spinner">
        </div> 
</div>
 
 </div>
 </div>
  </div>
   <div class="container" style="display:none;">
  <div class="row">
    <div class="col">
    
<button type="button" class="back">Back</button>

</div>  
    <div class="col">
    		<div style="text-align: right;">
<button type="button" class="next">Next</button>
</div>
    </div>
  </div>
    </div>


       


<div class="end" data-id='3'>
	<div class="container" style="text-align: center;">
    <h2>Journey Planner: </h2><br>
				<p style=" font-family:'Helvetica Neue',Arial,sans-serif;"> Transportation is the third largest producer of CO2 emissions in Australia. <br>
				Cars produce the most CO2 emissions in Transportation sector. <br>
				Reduce your Carbon Footprint and plan your bicycle journey NOW! </p><br><br>
    <button type="button" class="edit-previous">Calculate again</button>
    <a class="gobike" href="bickfunc.html">Plan my journey</a>
    </div>
</div>
<div class="newfooter">
	<p>Â© 2018 Eco Melbourne</p>
</div>
	</body>
</html>
<script>$('body').on('click', '.next', function() { 
    var id = $('.content:visible').data('id');
    var nextId = $('.content:visible').data('id')+1;
    $('[data-id="'+id+'"]').hide();
    $('[data-id="'+nextId+'"]').show();
    
    if($('.back:hidden').length == 1){
        $('.back').show();
    }
    
    if(nextId == 3){
		$('.content-holder').hide();
		$('.end').show();
    }
});

$('body').on('click', '.back', function() { 
    var id = $('.content:visible').data('id');
    var prevId = $('.content:visible').data('id')-1;
    if(prevId == 1){
   window.location.reload()
    }
    if(prevId > 0){
    $('[data-id="'+id+'"]').hide();
    $('[data-id="'+prevId+'"]').show();
   }
   else{
   	window.alert("This is the first step");
   }
});

$('body').on('click', '.edit-previous', function() { 
	$('.end').hide();
    $('.content-holder').show();
    $('#content-1').show();
       window.location.reload()

});</script>
 
<script>
      // This example requires the Places library. Include the libraries=places
      // parameter when you first load the API. For example:
      // <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places">
      
 	var geocoder;
      var start;
      function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
          mapTypeControl: false,
          center: {lat: -37, lng: 145},
          zoom: 10
        });

        new AutocompleteDirectionsHandler(map);
          var geocoder = new google.maps.Geocoder();

       

        infoWindow = new google.maps.InfoWindow;

        // Try HTML5 geolocation.
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
            var pos = {
              lat: position.coords.latitude,
              lng: position.coords.longitude
            };
            start = pos;
			var marker = new google.maps.Marker({
          	position: pos,
          	map: map,
          	title: 'Hello World!'
        }); 
        		infoWindow.open(map);
            map.setCenter(pos);


          }, function() {
            handleLocationError(true, infoWindow, map.getCenter());
          });
        } else {
          // Browser doesn't support Geolocation
          handleLocationError(false, infoWindow, map.getCenter());
        }
      }

       /**
        * @constructor
       */
      function AutocompleteDirectionsHandler(map) {
        this.map = map;
        this.originPlaceId = null;
        this.destinationPlaceId = null;
        this.travelMode = 'WALKING';
        var originInput = document.getElementById('origin-input');
        var destinationInput = document.getElementById('destination-input');
        var modeSelector = document.getElementById('mode-selector');
        this.directionsService = new google.maps.DirectionsService;
        this.directionsDisplay = new google.maps.DirectionsRenderer;
        this.directionsDisplay.setMap(map);

        var originAutocomplete = new google.maps.places.Autocomplete(
            originInput, {placeIdOnly: true});
        var destinationAutocomplete = new google.maps.places.Autocomplete(
            destinationInput, {placeIdOnly: true});

        this.setupClickListener('changemode-walking', 'WALKING');
        this.setupClickListener('changemode-transit', 'TRANSIT');
        this.setupClickListener('changemode-driving', 'DRIVING');
        this.setupClickListener('changemode-bike', 'BICYCLING');

        this.setupPlaceChangedListener(originAutocomplete, 'ORIG');
        this.setupPlaceChangedListener(destinationAutocomplete, 'DEST');

      }

      // Sets a listener on a radio button to change the filter type on Places
      // Autocomplete.
      AutocompleteDirectionsHandler.prototype.setupClickListener = function(id, mode) {
        var radioButton = document.getElementById(id);
        var me = this;
        var cut = document.getElementById('origin-input').value
        radioButton.addEventListener('click', function() {
          me.travelMode = mode;
          me.route();
        });
      };

      AutocompleteDirectionsHandler.prototype.setupPlaceChangedListener = function(autocomplete, mode) {
        var me = this;
        autocomplete.bindTo('bounds', this.map);
        autocomplete.addListener('place_changed', function() {
          var place = autocomplete.getPlace();
          if (!place.place_id) {
            window.alert("Please select an option from the dropdown list.");
            return;
          }
          if (mode === 'ORIG') {
            me.originPlaceId = place.place_id;
          } else {
            me.destinationPlaceId = place.place_id;
          }
          me.route();
        });

      };

      AutocompleteDirectionsHandler.prototype.route = function() {
        if (!this.originPlaceId || !this.destinationPlaceId) {
          return;
        }
        var me = this;
        this.directionsService.route({
       /* if (cut == "current location"){
       		orgin: start,
       		destination: {'placeId': this.destinationPlaceId},
         	travelMode: this.travelMode
        	}
      else{*/
          origin: {'placeId': this.originPlaceId},
          destination: {'placeId': this.destinationPlaceId},
          travelMode: this.travelMode
        // }
        }, function(response, status) {
          if (status === 'OK') {
            me.directionsDisplay.setDirections(response);
            var result = me.directionsDisplay.getDirections();
            var thisMode = result.request.travelMode;
            var total1 = 0;
            var time = 0;
        		var myroute = result.routes[0];
        		var emission = 0;
        		var busemission = 0;
        		for (var i = 0; i < myroute.legs.length; i++) {
         	 total1 += myroute.legs[i].distance.value;
         	 time += myroute.legs[i].duration.value;
        		}
       		    total1 = total1 / 1000;
       		    busemission = total1 * 50.9714;
       		    var car = total1 * 120.5;

				document.getElementById("distence").innerHTML = total1;
       		  	document.getElementById("resutlwithemission").style.display = "inline";	  	
        			document.getElementById("result3").innerHTML = (Math.round((0 | car) / 60 * 10) / 10) + " days";
        			document.getElementById("result4").innerHTML = (Math.round((0 | busemission) / 60 * 10) / 10) + " days";
var margin = {top: 20, right: 20, bottom: 70, left: 80},
    width = 600 - margin.left - margin.right,
    height = 300 - margin.top - margin.bottom;

// Parse the date / time
var parseDate = d3.time.format("%Y-%m").parse;

var x = d3.scale.ordinal().rangeRoundBands([0, width], .05);

var y = d3.scale.linear().range([height, 0]);

var xAxis = d3.svg.axis()
    .scale(x)
    .tickSize(0)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left")
    .ticks(10);

var svg = d3.select("#graphic").append("svg")
 	.attr("preserveAspectRatio", "xMidYMid meet")
    .attr("viewBox", "-140 -100 850 360")
    .append("g")
    .attr("transform", 
          "translate(" + margin.left + "," + margin.top + ")");
          
             var data = [{
                "name": "car",
                "value": (0|car),
                "ixx": "./img/car.png"
        ,},
            {
                "name": "bus",
                "value": (0|busemission),
                "ixx": "./img/bus.png"
        ,},
            {
                "name": "bicycle",
                "value": 0,
                "ixx": "./img/bike-2.png"
        ,},
            {
                "name": "walk",
                "value": 0,
                "ixx": "./img/pedestrian-walking.png"
        ,}];

        //sort bars based on value
        data = data.sort(function (a, b) {
            return d3.ascending(a.value, b.value);
        });
         x.domain(data.map(function(d) { return d.name; }));
  y.domain([0, d3.max(data, function(d) { return d.value+30; })]);

  var bars=svg.selectAll("bar")
      .data(data)
      .enter();
      
  bars.append("rect")
      .style("fill", "steelblue")
      .attr("x", function(d) { return x(d.name); })
      .attr("width", x.rangeBand()-50)
      .attr("y", function(d) { return y(d.value); })
      .attr("height", function(d) { return height - y(d.value); })

  bars.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis)
      .selectAll("text")      
      .attr("dx", "-1.3em")
      .attr("dy", "1.21em")
      .attr("transform", "rotate(0)" )
      .style("font-size", "15px");

  bars.append("g")
      .attr("class", "y axis")
      .call(yAxis)
      .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", -41)
      .attr("dy", ".11em")
      .style("text-anchor", "end")
      .text("Carbon dioxide emission gram")
      .style("font-size", "12px");  
      
   bars.append("text")
            .attr("class", "label")
            //y position of the label is halfway down the bar
            .attr("x", function (d) {
                return x(d.name)+16.5 ;
            })
            //x position is 3 pixels to the right of the bar
            .attr("y", function (d) {
                return y(d.value) -15;
            })
            .text(function (d) {
                return d.value;
            });
   
   
   
   bars.append("svg:image")
    			.attr("class", "svg-image")
    			.attr("x", function (d) {
                return x(d.name) + x.rangeBand() / 2 -42;
            })
            //x position is 3 pixels to the right of the bar
            .attr("y", function (d) {
                return y(d.value) -80;
            })
    			.attr("height", "50px")
    			.attr("width", "50px")
      		.attr("xlink:href",function (d) {
                return d.ixx;
           });
          
          }else {
            window.alert('Directions request failed due to ' + status);
          }
          
        });
      };
      
      

    </script>
    <script>
        AOS.init({
            duration: 1200,
          })
          </script>
     <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCBVLIu5YPn5cZXXGKqmyirL1-08uyh_WM&libraries=places&callback=initMap"
        async defer></script>
 <!-- 60 -->
 	<script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>
    <script src="vendor/scrollreveal/scrollreveal.min.js"></script>
    <script src="vendor/magnific-popup/jquery.magnific-popup.min.js"></script>
	<script>
    AOS.init({
        duration: 1200,
      })
      </script>
    <!-- Custom scripts for this template -->
    <script src="js/creative.min.js"></script>
 